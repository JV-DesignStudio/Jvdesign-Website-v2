<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JVDesignStudio | Void Rush</title>
    <link rel="icon" type="image/png" href="https://placehold.co/32x32/1a202c/ffffff?text=JV">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* --- General Setup --- */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            /* Use Light Beige Background */
            background-color: var(--color-light-beige); 
        }
        
        /* --- Cozy Creatures Color Palette --- */
        :root {
            --color-light-beige: #F0EAD6; /* Creamy/Base */
            --color-soft-tan: #D2B48C;    /* Soft Tan - Accent BG */
            --color-muted-rose: #BC4749;  /* Muted Rose/Berry - Primary CTA/Obstacles */
            --color-cozy-teal: #70A3A7;   /* Muted Teal/Blue-Gray - Accent/Player */
            --color-deep-charcoal: #1A202C; /* Text/Footer BG/Game Void */
        }

        /* Custom utility for the primary CTA button */
        .btn-primary {
            background-color: var(--color-muted-rose);
            color: white;
            padding: 0.75rem 1.5rem;
            font-weight: 700;
            border-radius: 0.5rem;
            transition: all 0.2s ease-in-out;
        }

        .btn-primary:hover {
            opacity: 0.9;
            transform: translateY(-1px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
        }

        /* --- Game-specific styling --- */
        #gameCanvas {
            /* Use deep charcoal for the 'Void' background */
            background-color: var(--color-deep-charcoal);
            border: 4px solid var(--color-soft-tan);
            border-radius: 1rem;
            display: block;
            margin: 0 auto;
            /* Ensure canvas is flexible within its container */
            max-width: 100%;
            aspect-ratio: 16 / 9;
            height: auto; 
            max-height: 600px;
        }
        .game-ui-card {
            background-color: white;
            color: var(--color-deep-charcoal);
            border-radius: 0.75rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        .game-control-button {
            background-color: var(--color-cozy-teal);
            color: white;
            transition: background-color 0.2s;
        }
        .game-control-button:hover {
            background-color: var(--color-soft-tan);
            color: var(--color-deep-charcoal);
        }
        /* Mobile-friendly controls visibility */
        @media (min-width: 640px) {
            .mobile-controls {
                display: none;
            }
        }
        
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Navigation Bar -->
    <header class="shadow-md" style="background-color: white;">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex justify-between items-center py-4">
            <a href="index.html" class="text-3xl font-extrabold" style="color: var(--color-deep-charcoal);">
                JV<span style="color: var(--color-cozy-teal);">Design</span>Studio
            </a>
            <div class="space-x-4 flex items-center">
                <!-- Navigation Links -->
                <a href="index.html" class="text-lg font-medium transition duration-150 hover:opacity-75" style="color: var(--color-deep-charcoal);">Home</a>
                <a href="content_hub.html" class="text-lg font-medium transition duration-150 hover:opacity-75" style="color: var(--color-deep-charcoal);">Content Hub</a>
                <a href="merch.html" class="text-lg font-medium transition duration-150 hover:opacity-75" style="color: var(--color-deep-charcoal);">Merch</a>
                <!-- Active Link for Void Rush -->
                <a href="voidrush.html" class="text-lg font-extrabold border-b-2" style="color: var(--color-muted-rose); border-color: var(--color-muted-rose);">Play!</a> 
                <!-- Cart button (not functional here, just structural) -->
                <button class="text-xl p-2 rounded-full transition duration-150 hover:bg-gray-100" style="color: var(--color-deep-charcoal);" aria-label="Shopping Cart">
                    <i class="fas fa-shopping-cart"></i>
                </button>
            </div>
        </nav>
    </header>

    <!-- Hero/Game Banner -->
    <section class="text-center py-12 sm:py-16" style="background-color: var(--color-soft-tan);">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <h1 class="text-4xl sm:text-5xl font-extrabold mb-3" style="color: var(--color-deep-charcoal);">
                Void Rush!
            </h1>
            <p class="text-lg sm:text-xl font-medium" style="color: var(--color-deep-charcoal);">
                How long can you survive the endless abstract void? Dodge the walls and set a new high score!
            </p>
        </div>
    </section>

    <!-- Game Section -->
    <section class="flex-grow py-12 md:py-16">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            
            <div class="flex flex-col lg:flex-row gap-8">
                
                <!-- Game Canvas (Main Area) -->
                <div class="lg:flex-1 w-full relative">
                    <canvas id="gameCanvas" width="800" height="450"></canvas>
                    
                    <!-- Game Info and Controls -->
                    <div class="flex justify-between items-center mt-4 text-lg font-bold p-3 game-ui-card">
                        <p>Score: <span id="scoreDisplay" class="text-xl" style="color: var(--color-muted-rose);">0</span></p>
                        <button id="startButton" class="btn-primary">Start Game (Space)</button>
                        <p>High Score: <span id="highScoreDisplay" class="text-xl" style="color: var(--color-cozy-teal);">0</span></p>
                    </div>

                    <!-- Mobile Controls (Visible only on small screens) -->
                    <div class="mobile-controls flex justify-around mt-4 space-x-4">
                        <button id="leftButton" class="w-1/2 p-4 rounded-lg game-control-button text-2xl font-extrabold shadow-md">
                            &larr; Left
                        </button>
                        <button id="rightButton" class="w-1/2 p-4 rounded-lg game-control-button text-2xl font-extrabold shadow-md">
                            Right &rarr;
                        </button>
                    </div>

                </div>

            </div>
            
            <!-- Instructions -->
            <div class="mt-8 p-6 game-ui-card">
                <h3 class="text-xl font-bold mb-3 border-b pb-2">How to Play:</h3>
                <ul class="list-disc list-inside space-y-1">
                    <li>**Goal:** Survive as long as possible without hitting the red walls.</li>
                    <li>**Desktop Controls:** Press the **Left Arrow** or **A** key to move left. Press the **Right Arrow** or **D** key to move right.</li>
                    <li>**Mobile Controls:** Use the **Left** and **Right** buttons beneath the score.</li>
                    <li>The walls get faster the longer you survive!</li>
                </ul>
            </div>

        </div>
    </section>

    <!-- Footer -->
    <footer class="py-8 mt-auto" style="background-color: var(--color-deep-charcoal);">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-gray-400">
            <p>&copy; <span id="year"></span> JVDesignStudio. All rights reserved.</p>
            <div class="mt-2 space-x-4">
                <a href="#" class="hover:text-white transition duration-150" style="color: var(--color-cozy-teal);">Privacy Policy</a>
                <a href="#" class="hover:text-white transition duration-150" style="color: var(--color-cozy-teal);">Terms of Service</a>
            </div>
        </div>
    </footer>

    <!-- Game Logic -->
    <script>
        // Set the current year for the footer
        document.getElementById('year').textContent = new Date().getFullYear();

        // --- Game Variables ---
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const highScoreDisplay = document.getElementById('highScoreDisplay');
        const startButton = document.getElementById('startButton');

        let isRunning = false;
        let score = 0;
        let highScore = localStorage.getItem('voidRushHighScore') || 0;
        let animationFrameId;

        // Player configuration (Teal color)
        const player = {
            width: 50,
            height: 50,
            x: 0, // Will be set in resetGame
            y: 0, // Will be set in resetGame
            speed: 8,
            color: getComputedStyle(document.documentElement).getPropertyValue('--color-cozy-teal'),
        };

        // Obstacle configuration (Muted Rose color)
        let obstacles = [];
        let obstacleSpeed = 3;
        let obstacleInterval = 75; // frames between new obstacles
        let frameCount = 0;
        const OBSTACLE_COLOR = getComputedStyle(document.documentElement).getPropertyValue('--color-muted-rose');

        // Input handling
        let keys = { left: false, right: false };
        
        // --- Initialization and Reset ---

        // Function to set canvas dimensions responsively
        function resizeCanvas() {
            const container = canvas.parentElement;
            // Use 16:9 aspect ratio based on the container width
            let w = container.clientWidth;
            // Cap the width and height for very large screens
            if (w > 800) w = 800; 

            // Set intrinsic dimensions for drawing
            canvas.width = w;
            canvas.height = w * (9 / 16); 

            // Reset player position after resize
            if (!isRunning) {
                player.x = (canvas.width / 2) - (player.width / 2);
                player.y = canvas.height - player.height - 20;
                draw(); // Redraw static screen
            }
        }
        
        // Load initial high score
        highScoreDisplay.textContent = highScore;
        
        // Attach resize listener
        window.addEventListener('resize', resizeCanvas);


        function resetGame() {
            isRunning = true;
            score = 0;
            obstacles = [];
            obstacleSpeed = 3;
            obstacleInterval = 75;
            frameCount = 0;

            // Place player in the center bottom
            player.x = (canvas.width / 2) - (player.width / 2);
            player.y = canvas.height - player.height - 20;

            startButton.textContent = "Restart (Space)";
            // Set initial velocity to 0 when starting/restarting
            keys.left = false;
            keys.right = false;
        }


        // --- Drawing Functions ---

        function drawPlayer() {
            ctx.fillStyle = player.color;
            ctx.fillRect(player.x, player.y, player.width, player.height);
        }

        function drawObstacles() {
            ctx.fillStyle = OBSTACLE_COLOR;
            obstacles.forEach(obs => {
                ctx.fillRect(obs.x, obs.y, obs.width, obs.height);
            });
        }

        function drawScore() {
            scoreDisplay.textContent = Math.floor(score);
            highScoreDisplay.textContent = highScore;
        }

        function drawGameOver() {
            ctx.fillStyle = 'rgba(26, 32, 44, 0.8)'; // Deep Charcoal overlay
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            ctx.fillStyle = 'white';
            ctx.textAlign = 'center';
            
            // Game Over Text
            ctx.font = '700 48px Inter, sans-serif';
            ctx.fillText('GAME OVER', canvas.width / 2, canvas.height / 2 - 40);

            // Score Text
            ctx.font = '700 28px Inter, sans-serif';
            ctx.fillText(`Final Score: ${Math.floor(score)}`, canvas.width / 2, canvas.height / 2 + 10);
            
            // Restart Prompt
            ctx.font = '400 20px Inter, sans-serif';
            ctx.fillText('Press SPACE or click Restart to play again', canvas.width / 2, canvas.height / 2 + 60);

            startButton.textContent = "Restart (Space)";
        }

        function drawStartScreen() {
            ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--color-deep-charcoal');
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            ctx.fillStyle = 'white';
            ctx.textAlign = 'center';

            ctx.font = '700 48px Inter, sans-serif';
            ctx.fillText('VOID RUSH', canvas.width / 2, canvas.height / 2 - 40);

            ctx.font = '400 20px Inter, sans-serif';
            ctx.fillText('Press SPACE or click Start to begin', canvas.width / 2, canvas.height / 2 + 10);
        }

        function draw() {
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            // Draw background (redundant since we fill the whole canvas, but good for void theme)
            ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--color-deep-charcoal');
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            if (isRunning) {
                drawPlayer();
                drawObstacles();
            } else if (score > 0) {
                drawGameOver();
            } else {
                drawStartScreen();
            }
            drawScore();
        }


        // --- Update Logic ---

        function updatePlayer() {
            // Horizontal Movement
            if (keys.left) {
                player.x -= player.speed;
            }
            if (keys.right) {
                player.x += player.speed;
            }

            // Boundary checking (keep player on screen)
            if (player.x < 0) {
                player.x = 0;
            }
            if (player.x + player.width > canvas.width) {
                player.x = canvas.width - player.width;
            }
        }

        function spawnObstacle() {
            // Create a new obstacle with random width and position
            const obsWidth = 80; // Fixed obstacle width
            const obsHeight = 20;
            const obsX = Math.random() * (canvas.width - obsWidth);
            
            obstacles.push({
                x: obsX,
                y: -obsHeight, // Start just above the canvas
                width: obsWidth,
                height: obsHeight,
            });
        }

        function updateObstacles() {
            // Move existing obstacles
            obstacles = obstacles.map(obs => {
                obs.y += obstacleSpeed;
                return obs;
            }).filter(obs => obs.y < canvas.height); // Remove off-screen obstacles

            // Spawn new obstacles
            frameCount++;
            if (frameCount % obstacleInterval === 0) {
                spawnObstacle();
            }
        }

        function checkCollision() {
            for (let i = 0; i < obstacles.length; i++) {
                const obs = obstacles[i];
                
                // AABB Collision Detection
                if (player.x < obs.x + obs.width &&
                    player.x + player.width > obs.x &&
                    player.y < obs.y + obs.height &&
                    player.y + player.height > obs.y) {
                    
                    // Collision detected! Game Over.
                    cancelAnimationFrame(animationFrameId);
                    isRunning = false;
                    
                    // Update High Score
                    if (score > highScore) {
                        highScore = Math.floor(score);
                        localStorage.setItem('voidRushHighScore', highScore);
                    }
                    
                    draw(); // Draw game over screen
                    return true;
                }
            }
            return false;
        }

        function updateDifficulty() {
            // Increase score
            score += 0.1; 
            
            // Speed up based on score
            obstacleSpeed = 3 + (Math.floor(score / 100) * 0.5); 
            
            // Increase obstacle frequency slightly, but cap it
            if (Math.floor(score) % 50 === 0 && obstacleInterval > 20) {
                obstacleInterval = Math.max(20, 75 - (Math.floor(score) / 50));
            }
        }


        // --- Game Loop ---

        function gameLoop() {
            if (isRunning) {
                updatePlayer();
                updateObstacles();
                updateDifficulty();
                if (checkCollision()) {
                    return; // Stop the loop on collision
                }
                draw();
                animationFrameId = requestAnimationFrame(gameLoop);
            }
        }

        // --- Event Listeners ---

        function startGame() {
            if (!isRunning) {
                resetGame();
                gameLoop();
            }
        }

        // Keyboard Controls
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft' || e.key.toLowerCase() === 'a') {
                keys.left = true;
            }
            if (e.key === 'ArrowRight' || e.key.toLowerCase() === 'd') {
                keys.right = true;
            }
            if (e.key === ' ' && !isRunning) {
                e.preventDefault(); // Prevent spacebar from scrolling
                startGame();
            }
        });

        document.addEventListener('keyup', (e) => {
            if (e.key === 'ArrowLeft' || e.key.toLowerCase() === 'a') {
                keys.left = false;
            }
            if (e.key === 'ArrowRight' || e.key.toLowerCase() === 'd') {
                keys.right = false;
            }
        });

        // Start Button
        startButton.addEventListener('click', startGame);

        // Mobile Touch Controls
        document.getElementById('leftButton').addEventListener('touchstart', (e) => {
            e.preventDefault();
            keys.left = true;
            if (!isRunning) startGame();
        });
        document.getElementById('leftButton').addEventListener('touchend', (e) => {
            e.preventDefault();
            keys.left = false;
        });

        document.getElementById('rightButton').addEventListener('touchstart', (e) => {
            e.preventDefault();
            keys.right = true;
            if (!isRunning) startGame();
        });
        document.getElementById('rightButton').addEventListener('touchend', (e) => {
            e.preventDefault();
            keys.right = false;
        });


        // --- Initial Load ---
        window.onload = function() {
            resizeCanvas(); // Set initial size
            draw();         // Draw initial start screen
        }

    </script>
</body>
</html>
